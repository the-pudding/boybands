!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e){e.exports={black:"#000000",white:"#ffffff","light blue":"#2074b2",blue:"#1d5ea1","dark blue":"#272a51","navy blue":"#272a51","light brown":"#ad775c",brown:"#773f25","dark brown":"#462615","light gray":"#bfbfbf",gray:"#7f7f7f","dark gray":"#3f3f3f","light green":"#16b279",green:"#008f63","dark green":"#003f2a","light orange":"#e5a367",orange:"#ea8b49","dark orange":"#ba520c","light pink":"#ed8eae",pink:"#ef6891","dark pink":"#c13865","light purple":"#a46eea",purple:"#9848ed","dark purple":"#602ea0","light red":"#f26179",red:"#ef465b","dark red":"#aa273d","light yellow":"#f9d798",yellow:"#f7c76d","dark yellow":"#c1b13d",blonde:"#f9d798",light:"#f6c7b7","medium-light":"#f9a092",medium:"#e78660","medium-dark":"#b85546",dark:"#993434","rust orange":"#ba520c",salmon:"#ed8eae",silver:"#3f3f3f","strawberry blonde":"#ea8b49",tan:"#ad775c",patterned:"#ffffff"}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e){e.exports=[{name:"default",cat:"default",move:"basic",start:0,end:0,frames:[0,6]},{name:"Shoulder Shimmy",cat:"pop",move:"basic",start:0,end:0,frames:[6,54]},{name:"Trucker Honk",cat:"pop",move:"basic",start:0,end:0,frames:[54,150]},{name:"Head Bob",cat:"pop",move:"basic",start:0,end:0,frames:[150,234]},{name:"Head Bob",cat:"slow",move:"basic",start:0,end:0,frames:[150,234]},{name:"Hip Rock",cat:"pop",move:"basic",start:0,end:0,frames:[234,312]},{name:"Lean (Left)",cat:"pop",move:"basic",start:0,end:0,frames:[312,366]},{name:"Lean (Right)",cat:"pop",move:"basic",start:0,end:0,frames:[366,420]},{name:"Open Up",cat:"slow",move:"basic",start:0,end:0,frames:[420,474]},{name:"Holding Heart",cat:"slow",move:"basic",start:0,end:0,frames:[474,522]},{name:"Reaching to Audience",cat:"slow",move:"basic",start:0,end:0,frames:[522,606]},{name:"Two-Step (Left)",cat:"pop",move:"basic",start:0,end:0,frames:[606,636]},{name:"Jump",cat:"pop",move:"basic",start:0,end:0,frames:[636,660]},{name:"N/A",cat:"",move:"basic",start:0,end:0,frames:[660,666]},{name:"drums",cat:"instrument",move:"basic",start:0,end:0,frames:[666,702]},{name:"N/A",cat:"",move:"basic",start:0,end:0,frames:[702,714]},{name:"guitar",cat:"instrument",move:"basic",start:0,end:0,frames:[714,750]},{name:"N/A",cat:"",move:"basic",start:0,end:0,frames:[750,762]},{name:"tambourine",cat:"instrument",move:"basic",start:0,end:0,frames:[762,858]},{name:"N/A",cat:"",move:"basic",start:0,end:0,frames:[858,870]},{name:"bass",cat:"instrument",move:"basic",start:0,end:0,frames:[870,966]},{name:"N/A",cat:"",move:"basic",start:0,end:0,frames:[966,978]},{name:"keyboard",cat:"instrument",move:"basic",start:0,end:0,frames:[978,1026]},{name:"N/A",cat:"",move:"basic",start:0,end:0,frames:[1026,1038]},{name:"piano",cat:"instrument",move:"basic",start:0,end:0,frames:[1038,1086]},{name:"N/A",cat:"",move:"basic",start:0,end:0,frames:[1086,1098]},{name:"microphone",cat:"instrument",move:"basic",start:0,end:0,frames:[1098,1138]},{name:"N/A",cat:"",move:"basic",start:0,end:0,frames:[1138,1150]},{name:"Shuffle",cat:"transition",move:"basic",start:0,end:0,frames:[1150,1166]},{name:"N/A",cat:"",move:"basic",start:0,end:0,frames:[1166,1172]}]},function(e,t,n){(function(n){var r;
/*!
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*!
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){"use strict";var a=function(){this.init()};a.prototype={init:function(){var e=this||o;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||f(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),a=0;a<r.length;a++){var i=t._howls[n]._soundById(r[a]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||f(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),a=0;a<r.length;a++){var i=t._howls[n]._soundById(r[a]);i&&i._node&&(i._node.muted=!!e||i._muted)}return t},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),a=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(a||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||o,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome/i.test(e._navigator&&e._navigator.userAgent);if(!e._mobileEnabled&&e.ctx&&t){e._mobileEnabled=!1,e.mobileAutoEnable=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(t){o._autoResume();var r=e.ctx.createBufferSource();r.buffer=e._scratchBuffer,r.connect(e.ctx.destination),void 0===r.start?r.noteOn(0):r.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),r.onended=function(){r.disconnect(0),e._mobileEnabled=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new a,i=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(e){var t=this;return o.ctx||f(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.mobileAutoEnable&&o._enableMobileAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,r;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(r=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&u(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e){e="__default";for(var a=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(a++,r=n._sounds[i]._id);1===a?e=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var l=s._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var u=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(s._rate);if(s._paused=!1,s._ended=!1,s._sprite=e,s._seek=u,s._start=n._sprite[e][0]/1e3,s._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,s._loop=!(!s._loop&&!n._sprite[e][2]),!(s._seek>=s._stop)){var _=s._node;if(n._webAudio){var f=function(){n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;_.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===_.bufferSource.start?s._loop?_.bufferSource.noteGrainOn(0,u,86400):_.bufferSource.noteGrainOn(0,u,c):s._loop?_.bufferSource.start(0,u,86400):_.bufferSource.start(0,u,c),d!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d)),t||setTimeout(function(){n._emit("play",s._id)},0)};"running"===o.state?f():(n.once("resume",f),n._clearTimer(s._id))}else{var p=function(){_.currentTime=u,_.muted=s._muted||n._muted||o._muted||_.muted,_.volume=s._volume*o.volume(),_.playbackRate=s._rate;try{var r=_.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,r.then(function(){n._playLock=!1,t||n._emit("play",s._id)}).catch(function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.")})):t||n._emit("play",s._id),_.playbackRate=s._rate,_.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d):(n._endTimers[s._id]=function(){n._ended(s),_.removeEventListener("ended",n._endTimers[s._id],!1)},_.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}},h=window&&window.ejecta||!_.readyState&&o._navigator.isCocoonJS;if(_.readyState>=3||h)p();else{var v=function(){p(),_.removeEventListener(o._canPlayEvent,v,!1)};_.addEventListener(o._canPlayEvent,v,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var a=t._soundById(n[r]);if(a&&!a._paused&&(a._seek=t.seek(n[r]),a._rateSeek=0,a._paused=!0,t._stopFade(n[r]),a._node))if(t._webAudio){if(!a._node.bufferSource)continue;void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),t._cleanBuffer(a._node)}else isNaN(a._node.duration)&&a._node.duration!==1/0||a._node.pause();arguments[1]||t._emit("pause",a?a._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),a=0;a<r.length;a++){n._clearTimer(r[a]);var o=n._soundById(r[a]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[a]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),a=0;a<r.length;a++){var i=n._soundById(r[a]);i&&(i._muted=e,i._interval&&n._stopFade(i._id),n._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,o.ctx.currentTime):i._node&&(i._node.muted=!!o._muted||e),n._emit("mute",i._id))}return n},volume:function(){var e,t,n,r=this,a=arguments;if(0===a.length)return r._volume;if(1===a.length||2===a.length&&void 0===a[1]?r._getSoundIds().indexOf(a[0])>=0?t=parseInt(a[0],10):e=parseFloat(a[0]):a.length>=2&&(e=parseFloat(a[0]),t=parseInt(a[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,a)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var i=0;i<t.length;i++)(n=r._soundById(t[i]))&&(n._volume=e,a[2]||r._stopFade(t[i]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,t,n,r)}}),a;a.volume(e,r);for(var i=a._getSoundIds(r),s=0;s<i.length;s++){var l=a._soundById(i[s]);if(l){if(r||a._stopFade(i[s]),a._webAudio&&!l._muted){var u=o.ctx.currentTime,c=u+n/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(t,c)}a._startFadeInterval(l,e,t,n,i[s],void 0===r)}}return a},_startFadeInterval:function(e,t,n,r,a,o){var i=this,s=t,l=n-t,u=Math.abs(l/.01),c=Math.max(4,u>0?r/u:r),d=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var a=(Date.now()-d)/r;d=Date.now(),s+=l*a,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,i._webAudio?e._volume=s:i.volume(s,e._id,!0),o&&(i._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,i.volume(n,e._id),i._emit("fade",e._id))},c)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,r=arguments;if(0===r.length)return this._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=this._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],this._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var a=this._getSoundIds(t),o=0;o<a.length;o++)(n=this._soundById(a[o]))&&(n._loop=e,this._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return this},rate:function(){var e,t,n,r=this,a=arguments;if(0===a.length)t=r._sounds[0]._id;else if(1===a.length){r._getSoundIds().indexOf(a[0])>=0?t=parseInt(a[0],10):e=parseFloat(a[0])}else 2===a.length&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if("number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,a)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var i=0;i<t.length;i++)if(n=r._soundById(t[i])){n._rateSeek=r.seek(t[i]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart,n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var s=r.seek(t[i]),l=1e3*((r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-s)/Math.abs(n._rate);!r._endTimers[t[i]]&&n._paused||(r._clearTimer(t[i]),r._endTimers[t[i]]=setTimeout(r._ended.bind(r,n),l)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){n._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var a=n._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var i=n.playing(t)?o.ctx.currentTime-a._playStart:0,s=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(s+i*Math.abs(a._rate))}return a._node.currentTime}var l=n.playing(t);l&&n.pause(t,!0),a._seek=e,a._ended=!1,n._clearTimer(t),!n._webAudio&&a._node&&(a._node.currentTime=e);var u=function(){n._emit("seek",t),l&&n.play(t,!0)};if(l&&!n._webAudio){var c=function(){n._playLock?setTimeout(c,0):u()};setTimeout(c,0)}else u()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){if(t[n]._paused||e.stop(t[n]._id),!e._webAudio)/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1);delete t[n]._node,e._clearTimer(t[n]._id)}var r=o._howls.indexOf(e);r>=0&&o._howls.splice(r,1);var a=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src){a=!1;break}return l&&a&&delete l[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var a=this["_on"+e];return"function"==typeof t&&a.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this["_on"+e],a=0;if("number"==typeof t&&(n=t,t=null),t||n)for(a=0;a<r.length;a++){var o=n===r[a].id;if(t===r[a].fn&&o||!t&&o){r.splice(a,1);break}}else if(e)this["_on"+e]=[];else{var i=Object.keys(this);for(a=0;a<i.length;a++)0===i[a].indexOf("_on")&&Array.isArray(this[i[a]])&&(this[i[a]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this["_on"+e],a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,r[a].fn),0),r[a].once&&this.off(e,r[a].fn,r[a].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),r)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new s(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){if(o._scratchBuffer&&e.bufferSource){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}}return e.bufferSource=null,this}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)}};var l={},u=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void _(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);d(r.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.withCredentials=e._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?d(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},c(o)}},c=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(l[t._src]=e,_(t,e)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(r).catch(n):o.ctx.decodeAudioData(e,r,n)},_=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(e){o.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());(o._navigator&&o._navigator.standalone&&!r||o._navigator&&!o._navigator.standalone&&!r)&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:1,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()};void 0===(r=function(){return{Howler:o,Howl:i}}.apply(t,[]))||(e.exports=r),t.Howler=o,t.Howl=i,"undefined"!=typeof window?(window.HowlerGlobal=a,window.Howler=o,window.Howl=i,window.Sound=s):void 0!==n&&(n.HowlerGlobal=a,n.Howler=o,n.Howl=i,n.Sound=s)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,r,a,o){if(!this.ctx||!this.ctx.listener)return this;var i=this._orientation;return t="number"!=typeof t?i[1]:t,n="number"!=typeof n?i[2]:n,r="number"!=typeof r?i[3]:r,a="number"!=typeof a?i[4]:a,o="number"!=typeof o?i[5]:o,"number"!=typeof e?i:(this._orientation=[e,t,n,r,a,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(n,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,r,a,o),this)},Howl.prototype.init=function(e){return function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var a=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),i=0;i<o.length;i++){var s=r._soundById(o[i]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,a),"spatial"===a?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,a){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,a)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===a){if("number"!=typeof t)return o._pos;o._pos=[t,n,r]}for(var i=o._getSoundIds(a),s=0;s<i.length;s++){var l=o._soundById(i[s]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,n,r],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,r)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(t,n,r,a){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,a)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===a){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,r]}for(var i=o._getSoundIds(a),s=0;s<i.length;s++){var l=o._soundById(i[s]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,n,r],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,r)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,a=arguments;if(!this._webAudio)return this;if(0===a.length)return this._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(r=this._soundById(parseInt(a[0],10)))?r._pannerAttr:this._pannerAttr;t=a[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:this._panningModel})}else 2===a.length&&(t=a[0],n=parseInt(a[1],10));for(var o=this._getSoundIds(n),i=0;i<o.length;i++)if(r=this._soundById(o[i])){var s=r._pannerAttr;s={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:s.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:s.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:s.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:s.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:s.panningModel};var l=r._panner;l?(l.coneInnerAngle=s.coneInnerAngle,l.coneOuterAngle=s.coneOuterAngle,l.coneOuterGain=s.coneOuterGain,l.distanceModel=s.distanceModel,l.maxDistance=s.maxDistance,l.refDistance=s.refDistance,l.rolloffFactor=s.rolloffFactor,l.panningModel=s.panningModel):(r._pos||(r._pos=this._pos||[0,0,-.5]),e(r,"spatial"))}return this},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n(1))},,function(e,t,n){(function(t){var n="Expected a function",r=NaN,a="[object Symbol]",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,_=c||d||Function("return this")(),f=Object.prototype.toString,p=Math.max,h=Math.min,v=function(){return _.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==a}(e))return r;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):i.test(e)?r:+e}e.exports=function(e,t,r){var a,o,i,s,l,u,c=0,d=!1,_=!1,f=!0;if("function"!=typeof e)throw new TypeError(n);function y(t){var n=a,r=o;return a=o=void 0,c=t,s=e.apply(r,n)}function g(e){var n=e-u;return void 0===u||n>=t||n<0||_&&e-c>=i}function w(){var e=v();if(g(e))return x(e);l=setTimeout(w,function(e){var n=t-(e-u);return _?h(n,i-(e-c)):n}(e))}function x(e){return l=void 0,f&&a?y(e):(a=o=void 0,s)}function A(){var e=v(),n=g(e);if(a=arguments,o=this,u=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(w,t),d?y(e):s}(u);if(_)return l=setTimeout(w,t),y(u)}return void 0===l&&(l=setTimeout(w,t)),s}return t=b(t)||0,m(r)&&(d=!!r.leading,i=(_="maxWait"in r)?p(b(r.maxWait)||0,t):i,f="trailing"in r?!!r.trailing:f),A.cancel=function(){void 0!==l&&clearTimeout(l),c=0,a=u=o=l=void 0},A.flush=function(){return void 0===l?s:x(v())},A}}).call(this,n(1))},function(e){e.exports=[{item:"top",value:"basketball jersey",layer_base:"jersey",layer_extra:"",sides:""},{item:"top",value:"hooded sleveless sweatshirt",layer_base:"general",layer_extra:"top--right-sleeve-very, top--left-sleeve-very, top--front-hoodie, top--back-hoodie",sides:""},{item:"top",value:"hoodie",layer_base:"general",layer_extra:"top--right-sleeve-long, top--left-sleeve-long, top--front-hoodie, top--back-hoodie",sides:""},{item:"top",value:"jacket",layer_base:"jacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"jean jacket",layer_base:"jeanjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"leather jacket",layer_base:"leatherjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"letterman jacket",layer_base:"lettermanjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"long-sleeve button down",layer_base:"sleeved-button",layer_extra:"top--right-sleeve-long, top--left-sleeve-long",sides:""},{item:"top",value:"long-sleeve button down unbuttoned down to navel",layer_base:"sleeved-button-open-half",layer_extra:"skin--chest, top--right-sleeve-long, top--left-sleeve-long",sides:""},{item:"top",value:"long-sleeve button down with bare chest",layer_base:"sleeved-button-open-full",layer_extra:"skin--chest, top--right-sleeve-long, top--left-sleeve-long",sides:""},{item:"top",value:"long-sleeve t-shirt",layer_base:"general",layer_extra:"top--right-sleeve-long, top--left-sleeve-long",sides:""},{item:"top",value:"long-sleeve turtleneck",layer_base:"general",layer_extra:"top--right-sleeve-long, top--left-sleeve-long, top--turtleneck",sides:""},{item:"top",value:"other jacket",layer_base:"otherjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"polo shirt",layer_base:"sleeved-polo",layer_extra:"top--right-sleeve-short, top--left-sleeve-short, top--sleeved-polo",sides:""},{item:"top",value:"short-sleeve button down",layer_base:"sleeved-button",layer_extra:"top--right-sleeve-short, top--left-sleeve-short",sides:""},{item:"top",value:"short-sleeve t-shirt",layer_base:"general",layer_extra:"top--right-sleeve-short, top--left-sleeve-short",sides:""},{item:"top",value:"sleeveless button-up with bare chest",layer_base:"sleeved-button-open-full",layer_extra:"skin--chest",sides:""},{item:"top",value:"sleeveless t-shirt",layer_base:"general",layer_extra:"top--right-sleeve-very, top--left-sleeve-very",sides:""},{item:"top",value:"suit jacket",layer_base:"suitjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"sweatshirt",layer_base:"general",layer_extra:"top--right-sleeve-long, top--left-sleeve-long, top--back-hoodie",sides:""},{item:"top",value:"t-shirt",layer_base:"general",layer_extra:"top--right-sleeve-short, top--left-sleeve-short",sides:""},{item:"top",value:"tank top",layer_base:"general",layer_extra:"skin--sleeveless",sides:""},{item:"top",value:"trenchcoat",layer_base:"",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"vest",layer_base:"vest",layer_extra:"",sides:""},{item:"top",value:"windbreaker",layer_base:"windbreaker",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket, top--back-hoodie",sides:""},{item:"top",value:"zipped sweatshirt (over a t-shirt or tank top)",layer_base:"sweatshirt-zipped",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket, top--back-hoodie",sides:""},{item:"bottom",value:"cargo pants",layer_base:"pants",layer_extra:"bottom--left-pocket-pants, bottom--right-pocket-pants",sides:""},{item:"bottom",value:"dress pants",layer_base:"pants",layer_extra:"",sides:""},{item:"bottom",value:"jeans",layer_base:"pants",layer_extra:"",sides:""},{item:"bottom ",value:"acid wash jeans",layer_base:"pants",layer_extra:"",sides:""},{item:"bottom",value:"overalls",layer_base:"pants",layer_extra:"bottom--overalls",sides:""},{item:"bottom",value:"shorts",layer_base:"shorts",layer_extra:"",sides:""},{item:"bottom",value:"sweat pants",layer_base:"pants",layer_extra:"",sides:""},{item:"facial-hair",value:"beard",layer_base:"",layer_extra:"beard",sides:""},{item:"facial-hair",value:"five o'clock shadow",layer_base:"",layer_extra:"fiveoclockshadow",sides:""},{item:"facial-hair",value:"goatee",layer_base:"",layer_extra:"goatee",sides:""},{item:"facial-hair",value:"mustache",layer_base:"",layer_extra:"mustache",sides:""},{item:"facial-hair",value:"sideburns",layer_base:"",layer_extra:"sideburns",sides:""},{item:"facial-hair",value:"soul patch",layer_base:"",layer_extra:"soulpatch",sides:""},{item:"accessories",value:"1 red glove",layer_base:"",layer_extra:"",sides:"1"},{item:"accessories",value:"arm sweatband",layer_base:"",layer_extra:"sweatband-right, sweatband-left",sides:"1"},{item:"accessories",value:"backwards baseball hat",layer_base:"",layer_extra:"baseballcap",sides:"1"},{item:"accessories",value:"bandana",layer_base:"",layer_extra:"bandana",sides:"2"},{item:"accessories",value:"baseball hat",layer_base:"",layer_extra:"baseballcap",sides:"1"},{item:"accessories",value:"beanie hat",layer_base:"",layer_extra:"beanie",sides:"1"},{item:"accessories",value:"beret",layer_base:"",layer_extra:"beret",sides:"1"},{item:"accessories",value:"bracelet",layer_base:"",layer_extra:"bracelet-right, bracelet-left",sides:"1"},{item:"accessories",value:"do-rag",layer_base:"",layer_extra:"dorag",sides:"2"},{item:"accessories",value:"earring(s)",layer_base:"",layer_extra:"earrings",sides:"1"},{item:"accessories",value:"earrings",layer_base:"",layer_extra:"earrings",sides:"1"},{item:"accessories",value:"eye patch",layer_base:"",layer_extra:"eyepatch",sides:"1"},{item:"accessories",value:"eyebrow ring",layer_base:"",layer_extra:"eyebrowring",sides:"1"},{item:"accessories",value:"fedora",layer_base:"",layer_extra:"fedora",sides:"1"},{item:"accessories",value:"flat hat",layer_base:"",layer_extra:"flathat",sides:"1"},{item:"accessories",value:"glasses",layer_base:"",layer_extra:"glasses",sides:"1"},{item:"accessories",value:"headband",layer_base:"",layer_extra:"headband",sides:"1"},{item:"accessories",value:"headphones around neck",layer_base:"",layer_extra:"headphones",sides:"2"},{item:"accessories",value:"lip ring",layer_base:"",layer_extra:"",sides:"1"},{item:"accessories",value:"tophat",layer_base:"",layer_extra:"tophat",sides:"1"},{item:"accessories",value:"necklace",layer_base:"",layer_extra:"necklace",sides:"1"},{item:"accessories",value:"newsboy cap",layer_base:"",layer_extra:"newsboycap",sides:"1"},{item:"accessories",value:"red goggles",layer_base:"",layer_extra:"redgoggles",sides:"1"},{item:"accessories",value:"rings",layer_base:"",layer_extra:"",sides:"1"},{item:"accessories",value:"sunglasses",layer_base:"",layer_extra:"sunglasses",sides:"1"},{item:"accessories",value:"suspenders",layer_base:"",layer_extra:"suspenders",sides:"1"},{item:"accessories",value:"tie",layer_base:"",layer_extra:"tie",sides:"1"},{item:"accessories",value:"ushanka",layer_base:"",layer_extra:"ushanka",sides:"1"},{item:"accessories",value:"wrist straps",layer_base:"",layer_extra:"sweatband-right, sweatband-left",sides:"1"},{item:"hair",value:"afro",layer_base:"bald",layer_extra:"afro",sides:"2"},{item:"hair",value:"bald",layer_base:"bald",layer_extra:"",sides:"2"},{item:"hair",value:"bangs",layer_base:"bald",layer_extra:"bangs",sides:"2"},{item:"hair",value:"braids",layer_base:"bald",layer_extra:"braids",sides:"1"},{item:"hair",value:"cornrows",layer_base:"bald",layer_extra:"cornrows",sides:"1"},{item:"hair",value:"crew",layer_base:"bald",layer_extra:"crew",sides:"2"},{item:"hair",value:"curly",layer_base:"bald",layer_extra:"curly",sides:"2"},{item:"hair",value:"fade",layer_base:"bald",layer_extra:"fade",sides:"2"},{item:"hair",value:"feathered",layer_base:"bald",layer_extra:"feathered",sides:"2"},{item:"hair",value:"high-top",layer_base:"general",layer_extra:"hightop",sides:"1"},{item:"hair",value:"just short hair",layer_base:"bald",layer_extra:"crew",sides:"2"},{item:"hair",value:"pigtail braids",layer_base:"bald",layer_extra:"pigtailbraids",sides:"2"},{item:"hair",value:"ponytail",layer_base:"bald",layer_extra:"ponytail",sides:"1"},{item:"hair",value:"rat tail",layer_base:"bald",layer_extra:"rattail",sides:"1"},{item:"hair",value:"shaggy",layer_base:"bald",layer_extra:"shaggy",sides:"2"},{item:"hair",value:"shaved",layer_base:"bald",layer_extra:"",sides:"2"},{item:"hair",value:"slick",layer_base:"bald",layer_extra:"slick",sides:"2"},{item:"hair",value:"spiked",layer_base:"bald",layer_extra:"spiked",sides:"2"},{item:"hair",value:"swept",layer_base:"bald",layer_extra:"swept",sides:"2"}]},,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),o={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return o.android()||o.blackberry()||o.ios()||o.opera()||o.windows()}},i=o;var s=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}}("localStorage");var l={get:function(e){return s?window.localStorage.getItem("pudding_boybands_".concat(e)):null},set:function(e){var t=e.key,n=e.value;s&&window.localStorage.setItem("pudding_boybands_".concat(t),n)},clear:function(e){s&&window.localStorage.removeItem("pudding_boybands_".concat(e))}};function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(e){var t=d(e,2),n=t[0],r=t[1].map(function(e){return u({},e,{accessories:e.accessories.split(",").map(function(e){return e.trim()}).filter(function(e){return e}),top_style:e.top_style.split(",").map(function(e){return e.trim()}).filter(function(e){return e}),facial_hair:e.facial_hair.split(",").map(function(e){return e.trim()}).filter(function(e){return e})})}),a=d3.nest().key(function(e){return e.band}).entries(r),o=n.map(function(e){return u({},e,{boys:function(e){var t=a.find(function(t){return t.key===e});return t||console.log(e),t?t.values:[]}(e.band)})});return o.sort(function(e,t){return d3.ascending(e.highest_pos_date,t.highest_pos_date)}),o.filter(function(e){return e.boys.length}).map(function(e){return u({},e,{slug:function(e){return e.toLowerCase().replace(/[^\w]/g,"_")}(e.band)})})}function f(e){return l.clear(e.slug),u({},e,{rating:l.get(e.slug)})}var p=function(){return new Promise(function(e,t){d3.loadData("assets/data/bands.csv","assets/data/boys.csv",function(n,r){if(n)t(n);else{var a=_(r).map(f);e(a)}})})},h=n(2);function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={},y=null,g="all",w="default",x=null,A=[],k=!1;function T(e){b[g].forEach(function(t,n){var r=A[n],a=r?function(e){var t=h.find(function(t){return"instrument"===t.cat&&t.name===e});return t?t.frames:h[0].frames}(r):e;t.playSegments(a,!0)})}function S(){var e=h.filter(function(e){return e.cat===w&&"N/A"!==e.name});T(e[Math.floor(Math.random()*e.length)].frames)}function O(){b[g].forEach(function(e){e.goToAndStop(0,!0)})}function I(){S()}var j={load:function(){return new Promise(function(e,t){d3.loadData("assets/data/animation.json",function(n,r){n?t(n):(y=function(e){var t=[],n=e.layers.map(function(e){var n=e.cl.split("--")[0],r=null;return r=e.cl.includes("facial-features")?"facial-features":"".concat(n," ").concat(e.cl),t.push("".concat(n," | ").concat(e.cl)),v({},e,{cl:r})});return t.sort(d3.ascending),window.dev=t.join("\n"),v({},e,{layers:n})}(r[0]),e())})})},create:function(e){var t=e.nodes,n=e.group,r=e.cb;b[n]=t.map(function(e){var t={animationData:y,container:e,autoplay:!1},n=lottie.loadAnimation(t);return n.addEventListener("complete",I),n.addEventListener("DOMLoaded",function(){k||r(),k=!0}),n})},play:function(e){var t=e.group,n=void 0===t?g:t,r=e.cat,a=void 0===r?w:r;g&&O(),g=n,"default"!==(w=a)&&S()},pause:O,transition:function(e){var t=e.shift,n=e.cat,r=void 0===n?"pop":n,a=e.instruments,o=void 0===a?[]:a,i=e.subset;x=r;var s=w;w=t?"transition":x,A=o,void 0===i?[]:i,t?T(h.find(function(e){return e.cat===w&&"Shuffle"===e.name}).frames):"default"===s&&S()},transitionEnd:function(){w=x}},P=n(3),M=500;window.bands={};var E=null,H=null,D=null;function B(){if(bands[E]&&bands[E].playing()){var e=bands[E].seek(),t=bands[E].duration();H&&H({seek:e,duration:t})}}var $={init:function(e){!function(e){var t=0,n=function(){var n=e[t],a=new P.Howl({src:"".concat("assets/audio","/").concat(n,".mp3"),onload:function(){bands[n]=a,r()},onloaderror:r,onfade:function(){n!==E&&bands[n].stop()}})},r=function(r){(t+=1)<e.length&&n()};n()}(e.map(function(e){return e.slug})),d3.interval(B,250)},play:function(e){var t=bands[E];if(e){E&&E!==e&&t&&t.playing()&&function(){var e=bands[E].volume();bands[E].fade(e,0,M)}(),E=e;var n=bands[e];n&&(n.on("end",D),n.volume(0),n.play(),n.fade(0,1,4*M))}else t&&!t.playing()&&t.play()},pause:function(){E&&bands[E]&&bands[E].pause()},mute:function(e){P.Howler.mute(e)},setCallbacks:function(e){var t=e.cbEnd,n=e.cbProgress;H=n,D=t}},F=250,L=d3.select("#history").select(".history__player"),G=L.select(".progress__bar"),V=L.selectAll("button"),C=L.select(".queue__current"),N=null;function W(){var e=d3.select(this),t=e.classed("is-visible");e.classed("is-visible",!t)}function q(){var e=d3.select(this),t=e.at("data-control"),n=e.selectAll("span"),r=null;n.size()&&(r=e.select("span.is-visible").at("data-state"),n.each(W)),function(e){["back","forward"].includes(e)&&(L.select('[data-state="play"]').classed("is-visible",!1),L.select('[data-state="pause"]').classed("is-visible",!0))}(t),function(e){["back","forward"].includes(e)&&(V.at("disabled",!0),setTimeout(function(){V.at("disabled",null)},F))}(t),N({control:t,state:r})}var R={init:function(e){N=e,V.on("click",q)},progress:function(e){var t=function(e){return d3.format("%")(e)}(1-e.seek/e.duration);G.st("width",t)},queue:function(e){C.text(e+1)}},X=d3.select("#history").select(".history__rating"),Y=X.selectAll("button"),z=d3.select(".tomato"),Z=null,Q=[];function U(){var e=d3.select(this).at("data-value");z.classed("is-thrown",!0).st("top","75%").st("left","75%"),Z(e)}var J={init:function(e){Z=e,Y.on("click",U),function(){var e=function(e,t){var n=e.find(function(e){return e.rating===t});return n?+n.count:0},t=Date.now(),n="https://pudding.cool/2018/11/boybands-data/user-ratings.json?v=".concat(t);d3.loadData(n,function(t,n){t?console.log(t):(console.log(new Date(n[0].timestamp)),Q=n[0].data.map(function(t){var n=t.key,r=e(t.values,"love"),a=e(t.values,"hate"),o=r+a;return{slug:n,love:r,hate:a,total:o,lovePercent:d3.format(".0%")(r/o),hatePercent:d3.format(".0%")(a/o)}}))})}()},update:function(e){var t=e.slug,n=e.rating;Y.classed("is-selected",!1),n?(Y.at("disabled",!0),X.select(".rating__".concat(n)).classed("is-selected",!0)):Y.at("disabled",null);var r=Q.find(function(e){return e.slug===t}),a=r?r.lovePercent:"0%",o=r?r.hatePercent:"0%";X.select(".rating__love span").text(a),X.select(".rating__hate span").text(o)}},K=n(0);function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=["hair-front","hair-back","accessories-front","accessories-back","top","bottom","facial-hair","instrument"],ne=n(6).map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ee(e,t,n[t])})}return e}({},e,{sides:+e.sides,layer_extra:e.layer_extra.split(",").map(function(e){return e.trim()}).filter(function(e){return e})})});function re(e){var t=K[e];return t||console.log("no color: ".concat(e)),t||K.black}function ae(e){var t=ne.find(function(t){return t.value===e});return t||console.log("no item in crosswalk: ".concat(e)),t}function oe(e){var t=e.$svg,n=e.selector,r=e.col,a=t.select(n);if(a.size()){if(a.st("display","block"),r){var o=d3.color(r);o="#000000"===r?re("dark gray"):o.darker().toString();var i=d3.color(r);i="#000000"===r?re("gray"):"#ffffff"===r?re("light gray"):i.brighter().toString();var s=a.selectAll("g");s.selectAll("path").st({fill:r,stroke:r}),s.selectAll("g.dark path").st({fill:o,stroke:o}),s.selectAll("g.light path").st({fill:i,stroke:i}),s.selectAll("g.white path").st({fill:K.white,stroke:K.white}),s.selectAll("g.gray path").st({fill:K.gray,stroke:K.gray})}}else console.log("no svg: ".concat(n))}var ie={init:function(){},change:function(e){var t=e.$svg,n=e.d;!function(e){te.forEach(function(t){e.selectAll(".".concat(t)).st("display","none")})}(t),function(e){var t=e.$svg,n=re(e.d.skin);t.selectAll(".skin g path").st({fill:n,stroke:n})}({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d;n.hair_style.split(",").map(function(e){return e.trim()}).forEach(function(e){var r=ae(e),a=re(n.hair_color);t.select(".skin--bald").st("display","none"),t.select(".skin--general").st("display","none");var o=".skin--".concat(r?r.layer_base:"bald");oe({$svg:t,selector:o}),r&&r.layer_extra.forEach(function(e){if("rattail"==e)oe({$svg:t,selector:".hair-back--rattail",col:a});else{var o=".hair-front--".concat(e,"-").concat(n.hair_length),i=".hair-back--".concat(e,"-").concat(n.hair_length);oe({$svg:t,selector:o,col:a}),2===r.sides&&oe({$svg:t,selector:i,col:a})}})})}({$svg:t,d:n}),function(e){var t=e.$svg;e.d.accessories.forEach(function(e){var n=ae(e);n.layer_extra.forEach(function(e){var r=".accessories-front--".concat(e),a=".accessories-back--".concat(e);oe({$svg:t,selector:r}),2===n.sides&&oe({$svg:t,selector:a})})})}({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d;n.top_style.forEach(function(e){var r=ae(e),a=["jacket","vest","leather jacket","other jacket","suit jacket"].includes(e)?re(n.jacket_color):re(n.shirt_color),o=".top--".concat(r.layer_base);oe({$svg:t,selector:o,col:a}),t.select(".skin--sleeveless").st("display","none"),t.select(".skin--chest").st("display","none"),r.layer_extra.forEach(function(e){if(e.includes("skin")){var r=re(n.skin);oe({$svg:t,selector:".".concat(e),skinCol:r})}else oe({$svg:t,selector:".".concat(e),col:a})})})}({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d,r=ae(n.bottom_style),a=re(n.bottom_color),o=".bottom--right-base-".concat(r.layer_base),i=".bottom--left-base-".concat(r.layer_base);oe({$svg:t,selector:o,col:a}),oe({$svg:t,selector:i,col:a}),oe({$svg:t,selector:".bottom--waist",col:a}),r.layer_extra.forEach(function(e){oe({$svg:t,selector:".".concat(e),col:a})})}({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d;n.facial_hair.forEach(function(e){var r=ae(e),a=re(n.hair_color);r.layer_extra.forEach(function(e){var n=".facial-hair--".concat(e);oe({$svg:t,selector:n,col:a})})})}({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d;n.instrument&&oe({$svg:t,selector:".instrument--".concat(n.instrument)})}({$svg:t,d:n})}};var se=function(){var e=document.createElement("fake"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(void 0!==e.style[n])return t[n];return null}(),le=100,ue=.53125,ce=4,de=d3.select("#history").select("figure"),_e=de.select(".figure__info"),fe=de.select(".figure__boys"),pe=null,he=0,ve=0,me=0,be=0,ye=!1;function ge(){var e=de.node().offsetWidth,t=Math.floor(e/(he+1)),n=Math.floor(e/(ce+1));be=(ve=t>=le?t:n)/2;var r=ve/ue,a=_e.node().offsetHeight;ye=ve*he>e-2*be,fe.st("padding","0 ".concat(be,"px")),pe&&(de.st("height",r*(ye?2:1)+a),pe.st({width:ve,height:r}),fe.st({height:r}))}var we={init:function(e){var t=e.bandData,n=e.cb;he=d3.max(t,function(e){return e.boys.length});var r=d3.range(he);me=t[0].boys.length;var a=(pe=fe.selectAll(".boy").data(r)).enter().append("div.boy");a.append("p").attr("class","boy__name"),pe=a.merge(pe),j.create({nodes:pe.nodes(),group:"all",cb:n}),j.play({}),ie.init(),ge()},update:function(e){var t=e.boys,n=e.danceSpeed;ge();var r=t.length,a=function(e){var t=d3.range(he).map(function(e){return!1});if(ye){var n=d3.range(e),r=n.slice(0,4),a=n.slice(4,he);r.forEach(function(e){return t[e]=!0}),1===a.length?t[5]=!0:a.forEach(function(e){return t[e]=!0})}else{var o=Math.floor(he/2),i=Math.floor(e/2),s=Math.floor(o)-i,l=s+e;d3.range(s,l).forEach(function(e){return t[e]=!0})}return t}(r),o=function(e){return ye?3===me&&3!==e:Math.abs(me-e)%2==1}(r);!function(e){pe.classed("is-visible",function(t,n){return e[n]});var t=e.filter(function(e){return e}).length,n=ye&&3===t||!ye&&t%2==0?ve/2:0;fe.st("left",n),fe.on(se,function(){j.transitionEnd()})}(a),function(e){var t=e.boys,n=e.subset.map(function(e,t){return e?t:null}),r=n.filter(function(e){return null!==e});t.forEach(function(e,t){var a=pe.filter(function(e,a){return a===n.findIndex(function(e){return e===r[t]})});ie.change({$svg:a.select("svg"),d:e}),a.select(".boy__name").text(e.name)})}({boys:t,subset:a});var i=n,s=t.map(function(e){return e.instrument});s.reverse();var l=a.map(function(e){return e?s.pop():null});j.transition({shift:o,cat:i,instruments:l,subset:a}),me=r},resize:ge},xe=window.location.hostname.indexOf("localhost")>-1,Ae={};var ke={send:function(e){var t=e.category,n=e.action,r=e.once;(function(e){var t=e.category,n=e.action;if(e.once){var r=t.toString().replace(/\W+/g,""),a=n.toString().replace(/\W+/g,""),o="".concat(r).concat(a);return!Ae[o]&&(Ae[o]=!0,!0)}return!0})({category:t,action:n,once:r})&&(xe?console.log({category:t,action:n,once:r}):window.ga&&ga("send",{hitType:"event",eventCategory:t.toString(),eventAction:n.toString()}))}},Te=d3.select("#history").select(".figure__info"),Se=Te.select(".info__year"),Oe=Te.select(".info__song"),Ie=Te.select(".info__band"),je=[],Pe=-1;function Me(e){(Pe+=e)>=je.length?Pe=0:Pe<0&&(Pe=je.length-1);var t=je[Pe];!function(e){var t=e.band,n=e.highest_pos_date,r=e.highest_song,a=d3.timeParse("%Y-%m-%d"),o=d3.timeFormat("%Y");Se.text(o(a(n))),Oe.text(r),Ie.text(t)}(t),we.update(t),R.queue(Pe),R.progress({seek:0,duration:1}),$.play(t.slug);var n=t.slug,r=t.rating;J.update({slug:n,rating:r})}function Ee(e){var t=e.seek,n=e.duration;R.progress({seek:t,duration:n})}function He(){Me(1)}function De(e){var t=je[Pe];t.rating=e;var n=t.slug,r=t.rating;l.set({key:n,value:r}),ke.send({category:n,action:e,once:!0}),J.update({slug:n,rating:r})}function Be(e){var t=e.control,n=e.state;switch(t){case"toggle":"play"===n?($.play(),j.play({})):(j.pause(),$.pause());break;case"back":Me(-1);break;case"forward":Me(1);break;case"volume":$.mute("on"===n)}}function $e(){var e=d3.event.keyCode;37===e?Be({control:"back"}):39===e&&Be({control:"forward"})}var Fe={init:function(e){var t=e.data,n=e.cb;je=t,R.init(Be),J.init(De),we.init({bandData:je,cb:n}),$.setCallbacks({cbEnd:He,cbProgress:Ee})},start:function(){Me(1),d3.select("body").on("keyup",$e)},resize:function(){we.resize()}},Le=d3.select("body"),Ge=Le.select(".intro"),Ve=Le.selectAll(".intro__choice button"),Ce=Le.select(".choice__loading"),Ne=0;function We(){var e=Le.node().offsetWidth;Ne!==e&&(Ne=e,Fe.resize())}function qe(){var e=d3.select(this).at("data-value");Le.select("#".concat(e)).classed("is-selected",!0),"history"===e&&Fe.start(),Ge.classed("is-hidden",!0)}function Re(){Ve.classed("is-visible",!0).on("click",qe),Ce.classed("is-hidden",!0)}Le.classed("is-mobile",i.any()),window.addEventListener("resize",a()(We,150)),function(){if(Le.select("header").classed("is-sticky")){var e=Le.select(".header__menu"),t=Le.select(".header__toggle");t.on("click",function(){var n=e.classed("is-visible");e.classed("is-visible",!n),t.classed("is-visible",!n)})}}(),j.load().then(p).then(function(e){$.init(e),Fe.init({data:e,cb:Re})})}]);