!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e){e.exports={black:"#000000",white:"#ffffff","light blue":"#2074b2",blue:"#1d5ea1","dark blue":"#272a51","navy blue":"#272a51","light brown":"#ad775c",brown:"#773f25","dark brown":"#462615","light gray":"#bfbfbf",gray:"#7f7f7f","dark gray":"#3f3f3f","light green":"#16b279",green:"#008f63","dark green":"#003f2a","light orange":"#e5a367",orange:"#ea8b49","dark orange":"#ba520c","light pink":"#ed8eae",pink:"#ef6891","dark pink":"#c13865","light purple":"#a46eea",purple:"#9848ed","dark purple":"#602ea0","light red":"#f26179",red:"#ef465b","dark red":"#aa273d","light yellow":"#f9d798",yellow:"#f7c76d","dark yellow":"#c1b13d",blonde:"#f9d798",light:"#f6c7b7","medium-light":"#f9a092",medium:"#e78660","medium-dark":"#b85546",dark:"#993434","rust orange":"#ba520c",salmon:"#ed8eae",silver:"#3f3f3f","strawberry blonde":"#ea8b49",tan:"#ad775c",patterned:"#ffffff"}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e){e.exports=[{item:"top",value:"basketball jersey",layer_base:"jersey",layer_extra:"",sides:""},{item:"top",value:"hooded sleveless sweatshirt",layer_base:"general",layer_extra:"top--right-sleeve-very, top--left-sleeve-very, top--front-hoodie, top--back-hoodie",sides:""},{item:"top",value:"hoodie",layer_base:"general",layer_extra:"top--right-sleeve-long, top--left-sleeve-long, top--front-hoodie, top--back-hoodie",sides:""},{item:"top",value:"jacket",layer_base:"jacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"jean jacket",layer_base:"jeanjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"leather jacket",layer_base:"leatherjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"letterman jacket",layer_base:"lettermanjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"long-sleeve button down",layer_base:"sleeved-button",layer_extra:"top--right-sleeve-long, top--left-sleeve-long",sides:""},{item:"top",value:"long-sleeve button down unbuttoned down to navel",layer_base:"sleeved-button-open-half",layer_extra:"skin--chest, top--right-sleeve-long, top--left-sleeve-long",sides:""},{item:"top",value:"long-sleeve button down with bare chest",layer_base:"sleeved-button-open-full",layer_extra:"skin--chest, top--right-sleeve-long, top--left-sleeve-long",sides:""},{item:"top",value:"long-sleeve t-shirt",layer_base:"general",layer_extra:"top--right-sleeve-long, top--left-sleeve-long",sides:""},{item:"top",value:"long-sleeve turtleneck",layer_base:"general",layer_extra:"top--right-sleeve-long, top--left-sleeve-long, top--turtleneck",sides:""},{item:"top",value:"other jacket",layer_base:"otherjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"polo shirt",layer_base:"sleeved-polo",layer_extra:"top--right-sleeve-short, top--left-sleeve-short, top--sleeved-polo",sides:""},{item:"top",value:"short-sleeve button down",layer_base:"sleeved-button",layer_extra:"top--right-sleeve-short, top--left-sleeve-short",sides:""},{item:"top",value:"short-sleeve t-shirt",layer_base:"general",layer_extra:"top--right-sleeve-short, top--left-sleeve-short",sides:""},{item:"top",value:"sleeveless button-up with bare chest",layer_base:"sleeved-button-open-full",layer_extra:"skin--chest",sides:""},{item:"top",value:"sleeveless t-shirt",layer_base:"general",layer_extra:"top--right-sleeve-very, top--left-sleeve-very",sides:""},{item:"top",value:"suit jacket",layer_base:"suitjacket",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"sweatshirt",layer_base:"general",layer_extra:"top--right-sleeve-long, top--left-sleeve-long, top--back-hoodie",sides:""},{item:"top",value:"t-shirt",layer_base:"general",layer_extra:"top--right-sleeve-short, top--left-sleeve-short",sides:""},{item:"top",value:"tank top",layer_base:"general",layer_extra:"skin--sleeveless",sides:""},{item:"top",value:"trenchcoat",layer_base:"trenchcoat",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket",sides:""},{item:"top",value:"vest",layer_base:"vest",layer_extra:"skin--chest",sides:""},{item:"top",value:"windbreaker",layer_base:"windbreaker",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket, top--back-hoodie",sides:""},{item:"top",value:"zipped sweatshirt (over a t-shirt or tank top)",layer_base:"sweatshirt-zipped",layer_extra:"top--right-sleeve-jacket, top--left-sleeve-jacket, top--back-hoodie",sides:""},{item:"bottom",value:"cargo pants",layer_base:"pants",layer_extra:"bottom--left-pocket-pants, bottom--right-pocket-pants",sides:""},{item:"bottom",value:"dress pants",layer_base:"pants",layer_extra:"",sides:""},{item:"bottom",value:"jeans",layer_base:"pants",layer_extra:"",sides:""},{item:"bottom ",value:"acid wash jeans",layer_base:"pants",layer_extra:"",sides:""},{item:"bottom",value:"overalls",layer_base:"pants",layer_extra:"bottom--overalls",sides:""},{item:"bottom",value:"shorts",layer_base:"shorts",layer_extra:"",sides:""},{item:"bottom",value:"sweat pants",layer_base:"pants",layer_extra:"",sides:""},{item:"facial-hair",value:"beard",layer_base:"",layer_extra:"beard",sides:""},{item:"facial-hair",value:"five o'clock shadow",layer_base:"",layer_extra:"fiveoclockshadow",sides:""},{item:"facial-hair",value:"goatee",layer_base:"",layer_extra:"goatee",sides:""},{item:"facial-hair",value:"mustache",layer_base:"",layer_extra:"mustache",sides:""},{item:"facial-hair",value:"sideburns",layer_base:"",layer_extra:"sideburns",sides:""},{item:"facial-hair",value:"soul patch",layer_base:"",layer_extra:"soulpatch",sides:""},{item:"accessories",value:"1 red glove",layer_base:"",layer_extra:"",sides:"1"},{item:"accessories",value:"arm sweatband",layer_base:"",layer_extra:"sweatband-right, sweatband-left",sides:"1"},{item:"accessories",value:"backwards baseball hat",layer_base:"",layer_extra:"baseballcap",sides:"1"},{item:"accessories",value:"bandana",layer_base:"",layer_extra:"bandana",sides:"2"},{item:"accessories",value:"baseball hat",layer_base:"",layer_extra:"baseballcap",sides:"1"},{item:"accessories",value:"beanie hat",layer_base:"",layer_extra:"beanie",sides:"1"},{item:"accessories",value:"beanie hat braids",layer_base:"",layer_extra:"beanie-braids",sides:"1"},{item:"accessories",value:"beret",layer_base:"",layer_extra:"beret",sides:"1"},{item:"accessories",value:"bracelet",layer_base:"",layer_extra:"bracelet-right, bracelet-left",sides:"1"},{item:"accessories",value:"do-rag",layer_base:"",layer_extra:"dorag",sides:"2"},{item:"accessories",value:"earring(s)",layer_base:"",layer_extra:"earrings",sides:"1"},{item:"accessories",value:"earrings",layer_base:"",layer_extra:"earrings",sides:"1"},{item:"accessories",value:"eye patch",layer_base:"",layer_extra:"eyepatch",sides:"1"},{item:"accessories",value:"eyebrow ring",layer_base:"",layer_extra:"eyebrowring",sides:"1"},{item:"accessories",value:"fedora",layer_base:"",layer_extra:"fedora",sides:"1"},{item:"accessories",value:"flat hat",layer_base:"",layer_extra:"flathat",sides:"1"},{item:"accessories",value:"glasses",layer_base:"",layer_extra:"glasses",sides:"1"},{item:"accessories",value:"headband",layer_base:"",layer_extra:"headband",sides:"1"},{item:"accessories",value:"headphones around neck",layer_base:"",layer_extra:"headphones",sides:"2"},{item:"accessories",value:"lip ring",layer_base:"",layer_extra:"",sides:"1"},{item:"accessories",value:"tophat",layer_base:"",layer_extra:"tophat",sides:"1"},{item:"accessories",value:"necklace",layer_base:"",layer_extra:"necklace",sides:"1"},{item:"accessories",value:"newsboy cap",layer_base:"",layer_extra:"newsboycap",sides:"1"},{item:"accessories",value:"red goggles",layer_base:"",layer_extra:"redgoggles",sides:"1"},{item:"accessories",value:"rings",layer_base:"",layer_extra:"",sides:"1"},{item:"accessories",value:"sunglasses",layer_base:"",layer_extra:"sunglasses",sides:"1"},{item:"accessories",value:"suspenders",layer_base:"",layer_extra:"suspenders",sides:"1"},{item:"accessories",value:"tie",layer_base:"",layer_extra:"tie",sides:"1"},{item:"accessories",value:"ushanka",layer_base:"",layer_extra:"ushanka",sides:"1"},{item:"accessories",value:"wrist straps",layer_base:"",layer_extra:"sweatband-right, sweatband-left",sides:"1"},{item:"hair",value:"afro",layer_base:"bald",layer_extra:"afro",sides:"2"},{item:"hair",value:"bald",layer_base:"bald",layer_extra:"",sides:"2"},{item:"hair",value:"bangs",layer_base:"bald",layer_extra:"bangs",sides:"2"},{item:"hair",value:"braids",layer_base:"bald",layer_extra:"braids",sides:"1"},{item:"hair",value:"cornrows",layer_base:"bald",layer_extra:"cornrows",sides:"1"},{item:"hair",value:"crew",layer_base:"bald",layer_extra:"crew",sides:"2"},{item:"hair",value:"curly",layer_base:"bald",layer_extra:"curly",sides:"2"},{item:"hair",value:"fade",layer_base:"bald",layer_extra:"fade",sides:"2"},{item:"hair",value:"feathered",layer_base:"bald",layer_extra:"feathered",sides:"2"},{item:"hair",value:"high-top",layer_base:"general",layer_extra:"hightop",sides:"1"},{item:"hair",value:"just short hair",layer_base:"bald",layer_extra:"crew",sides:"2"},{item:"hair",value:"pigtail braids",layer_base:"bald",layer_extra:"pigtailbraids",sides:"2"},{item:"hair",value:"ponytail",layer_base:"bald",layer_extra:"ponytail",sides:"3"},{item:"hair",value:"rat tail",layer_base:"bald",layer_extra:"rattail",sides:"1"},{item:"hair",value:"shaggy",layer_base:"bald",layer_extra:"shaggy",sides:"2"},{item:"hair",value:"shaved",layer_base:"bald",layer_extra:"",sides:"2"},{item:"hair",value:"slick",layer_base:"bald",layer_extra:"slick",sides:"2"},{item:"hair",value:"spiked",layer_base:"bald",layer_extra:"spiked",sides:"2"},{item:"hair",value:"swept",layer_base:"bald",layer_extra:"swept",sides:"2"}]},function(e,t,n){(function(n){var a;
/*!
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*!
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var e=this||o;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||f(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var a=t._howls[n]._getSoundIds(),r=0;r<a.length;r++){var i=t._howls[n]._soundById(a[r]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||f(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var a=t._howls[n]._getSoundIds(),r=0;r<a.length;r++){var i=t._howls[n]._soundById(a[r]);i&&i._node&&(i._node.muted=!!e||i._muted)}return t},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),a=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),r=a&&parseInt(a[0].split("/")[1],10)<33;return e._codecs={mp3:!(r||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||o,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome/i.test(e._navigator&&e._navigator.userAgent);if(!e._mobileEnabled&&e.ctx&&t){e._mobileEnabled=!1,e.mobileAutoEnable=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(t){o._autoResume();var a=e.ctx.createBufferSource();a.buffer=e._scratchBuffer,a.connect(e.ctx.destination),void 0===a.start?a.noteOn(0):a.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),a.onended=function(){a.disconnect(0),e._mobileEnabled=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new r,i=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(e){var t=this;return o.ctx||f(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.mobileAutoEnable&&o._enableMobileAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,a;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(a=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(a))||(n=/\.([^.]+)$/.exec(a.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&u(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,a=null;if("number"==typeof e)a=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e){e="__default";for(var r=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(r++,a=n._sounds[i]._id);1===r?e=null:a=null}}var s=a?n._soundById(a):n._inactiveSound();if(!s)return null;if(a&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var l=s._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(a&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var u=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(s._rate);if(s._paused=!1,s._ended=!1,s._sprite=e,s._seek=u,s._start=n._sprite[e][0]/1e3,s._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,s._loop=!(!s._loop&&!n._sprite[e][2]),!(s._seek>=s._stop)){var _=s._node;if(n._webAudio){var f=function(){n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;_.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===_.bufferSource.start?s._loop?_.bufferSource.noteGrainOn(0,u,86400):_.bufferSource.noteGrainOn(0,u,c):s._loop?_.bufferSource.start(0,u,86400):_.bufferSource.start(0,u,c),d!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d)),t||setTimeout(function(){n._emit("play",s._id)},0)};"running"===o.state?f():(n.once("resume",f),n._clearTimer(s._id))}else{var p=function(){_.currentTime=u,_.muted=s._muted||n._muted||o._muted||_.muted,_.volume=s._volume*o.volume(),_.playbackRate=s._rate;try{var a=_.play();if(a&&"undefined"!=typeof Promise&&(a instanceof Promise||"function"==typeof a.then)?(n._playLock=!0,a.then(function(){n._playLock=!1,t||n._emit("play",s._id)}).catch(function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.")})):t||n._emit("play",s._id),_.playbackRate=s._rate,_.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d):(n._endTimers[s._id]=function(){n._ended(s),_.removeEventListener("ended",n._endTimers[s._id],!1)},_.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}},h=window&&window.ejecta||!_.readyState&&o._navigator.isCocoonJS;if(_.readyState>=3||h)p();else{var m=function(){p(),_.removeEventListener(o._canPlayEvent,m,!1)};_.addEventListener(o._canPlayEvent,m,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),a=0;a<n.length;a++){t._clearTimer(n[a]);var r=t._soundById(n[a]);if(r&&!r._paused&&(r._seek=t.seek(n[a]),r._rateSeek=0,r._paused=!0,t._stopFade(n[a]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var a=n._getSoundIds(e),r=0;r<a.length;r++){n._clearTimer(a[r]);var o=n._soundById(a[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(a[r]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var a=n._getSoundIds(t),r=0;r<a.length;r++){var i=n._soundById(a[r]);i&&(i._muted=e,i._interval&&n._stopFade(i._id),n._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,o.ctx.currentTime):i._node&&(i._node.muted=!!o._muted||e),n._emit("mute",i._id))}return n},volume:function(){var e,t,n,a=this,r=arguments;if(0===r.length)return a._volume;if(1===r.length||2===r.length&&void 0===r[1]?a._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):e=parseFloat(r[0]):r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=t?a._soundById(t):a._sounds[0])?n._volume:0;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,r)}}),a;void 0===t&&(a._volume=e),t=a._getSoundIds(t);for(var i=0;i<t.length;i++)(n=a._soundById(t[i]))&&(n._volume=e,r[2]||a._stopFade(t[i]),a._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),a._emit("volume",n._id));return a},fade:function(e,t,n,a){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,n,a)}}),r;r.volume(e,a);for(var i=r._getSoundIds(a),s=0;s<i.length;s++){var l=r._soundById(i[s]);if(l){if(a||r._stopFade(i[s]),r._webAudio&&!l._muted){var u=o.ctx.currentTime,c=u+n/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(t,c)}r._startFadeInterval(l,e,t,n,i[s],void 0===a)}}return r},_startFadeInterval:function(e,t,n,a,r,o){var i=this,s=t,l=n-t,u=Math.abs(l/.01),c=Math.max(4,u>0?a/u:a),d=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var r=(Date.now()-d)/a;d=Date.now(),s+=l*r,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,i._webAudio?e._volume=s:i.volume(s,e._id,!0),o&&(i._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,i.volume(n,e._id),i._emit("fade",e._id))},c)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,a=arguments;if(0===a.length)return this._loop;if(1===a.length){if("boolean"!=typeof a[0])return!!(n=this._soundById(parseInt(a[0],10)))&&n._loop;e=a[0],this._loop=e}else 2===a.length&&(e=a[0],t=parseInt(a[1],10));for(var r=this._getSoundIds(t),o=0;o<r.length;o++)(n=this._soundById(r[o]))&&(n._loop=e,this._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return this},rate:function(){var e,t,n,a=this,r=arguments;if(0===r.length)t=a._sounds[0]._id;else if(1===r.length){a._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("number"!=typeof e)return(n=a._soundById(t))?n._rate:a._rate;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,r)}}),a;void 0===t&&(a._rate=e),t=a._getSoundIds(t);for(var i=0;i<t.length;i++)if(n=a._soundById(t[i])){n._rateSeek=a.seek(t[i]),n._playStart=a._webAudio?o.ctx.currentTime:n._playStart,n._rate=e,a._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var s=a.seek(t[i]),l=1e3*((a._sprite[n._sprite][0]+a._sprite[n._sprite][1])/1e3-s)/Math.abs(n._rate);!a._endTimers[t[i]]&&n._paused||(a._clearTimer(t[i]),a._endTimers[t[i]]=setTimeout(a._ended.bind(a,n),l)),a._emit("rate",n._id)}return a},seek:function(){var e,t,n=this,a=arguments;if(0===a.length)t=n._sounds[0]._id;else if(1===a.length){n._getSoundIds().indexOf(a[0])>=0?t=parseInt(a[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(a[0]))}else 2===a.length&&(e=parseFloat(a[0]),t=parseInt(a[1],10));if(void 0===t)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,a)}}),n;var r=n._soundById(t);if(r){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var i=n.playing(t)?o.ctx.currentTime-r._playStart:0,s=r._rateSeek?r._rateSeek-r._seek:0;return r._seek+(s+i*Math.abs(r._rate))}return r._node.currentTime}var l=n.playing(t);l&&n.pause(t,!0),r._seek=e,r._ended=!1,n._clearTimer(t),!n._webAudio&&r._node&&(r._node.currentTime=e);var u=function(){n._emit("seek",t),l&&n.play(t,!0)};if(l&&!n._webAudio){var c=function(){n._playLock?setTimeout(c,0):u()};setTimeout(c,0)}else u()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){if(t[n]._paused||e.stop(t[n]._id),!e._webAudio)/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1);delete t[n]._node,e._clearTimer(t[n]._id)}var a=o._howls.indexOf(e);a>=0&&o._howls.splice(a,1);var r=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src){r=!1;break}return l&&r&&delete l[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,a){var r=this["_on"+e];return"function"==typeof t&&r.push(a?{id:n,fn:t,once:a}:{id:n,fn:t}),this},off:function(e,t,n){var a=this["_on"+e],r=0;if("number"==typeof t&&(n=t,t=null),t||n)for(r=0;r<a.length;r++){var o=n===a[r].id;if(t===a[r].fn&&o||!t&&o){a.splice(r,1);break}}else if(e)this["_on"+e]=[];else{var i=Object.keys(this);for(r=0;r<i.length;r++)0===i[r].indexOf("_on")&&Array.isArray(this[i[r]])&&(this[i[r]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var a=this["_on"+e],r=a.length-1;r>=0;r--)a[r].id&&a[r].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,a[r].fn),0),a[r].once&&this.off(e,a[r].fn,a[r].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),a)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new s(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){if(o._scratchBuffer&&e.bufferSource){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}}return e.bufferSource=null,this}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)}};var l={},u=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void _(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),a=new Uint8Array(n.length),r=0;r<n.length;++r)a[r]=n.charCodeAt(r);d(a.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.withCredentials=e._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?d(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},c(o)}},c=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&t._sounds.length>0?(l[t._src]=e,_(t,e)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(a).catch(n):o.ctx.decodeAudioData(e,a,n)},_=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(e){o.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var a=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());(o._navigator&&o._navigator.standalone&&!a||o._navigator&&!o._navigator.standalone&&!a)&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:1,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()};void 0===(a=function(){return{Howler:o,Howl:i}}.apply(t,[]))||(e.exports=a),t.Howler=o,t.Howl=i,"undefined"!=typeof window?(window.HowlerGlobal=r,window.Howler=o,window.Howl=i,window.Sound=s):void 0!==n&&(n.HowlerGlobal=r,n.Howler=o,n.Howl=i,n.Sound=s)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,a,r,o){if(!this.ctx||!this.ctx.listener)return this;var i=this._orientation;return t="number"!=typeof t?i[1]:t,n="number"!=typeof n?i[2]:n,a="number"!=typeof a?i[3]:a,r="number"!=typeof r?i[4]:r,o="number"!=typeof o?i[5]:o,"number"!=typeof e?i:(this._orientation=[e,t,n,a,r,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(n,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,a,r,o),this)},Howl.prototype.init=function(e){return function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"stereo",action:function(){a.stereo(t,n)}}),a;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0]}for(var o=a._getSoundIds(n),i=0;i<o.length;i++){var s=a._soundById(o[i]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,r),"spatial"===r?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit("stereo",s._id)}}return a},Howl.prototype.pos=function(t,n,a,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,a,r)}}),o;if(n="number"!=typeof n?0:n,a="number"!=typeof a?-.5:a,void 0===r){if("number"!=typeof t)return o._pos;o._pos=[t,n,a]}for(var i=o._getSoundIds(r),s=0;s<i.length;s++){var l=o._soundById(i[s]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,n,a],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,a)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(t,n,a,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,a,r)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,a="number"!=typeof a?o._orientation[2]:a,void 0===r){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,a]}for(var i=o._getSoundIds(r),s=0;s<i.length;s++){var l=o._soundById(i[s]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,n,a],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,a)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,a,r=arguments;if(!this._webAudio)return this;if(0===r.length)return this._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(a=this._soundById(parseInt(r[0],10)))?a._pannerAttr:this._pannerAttr;t=r[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:this._panningModel})}else 2===r.length&&(t=r[0],n=parseInt(r[1],10));for(var o=this._getSoundIds(n),i=0;i<o.length;i++)if(a=this._soundById(o[i])){var s=a._pannerAttr;s={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:s.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:s.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:s.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:s.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:s.panningModel};var l=a._panner;l?(l.coneInnerAngle=s.coneInnerAngle,l.coneOuterAngle=s.coneOuterAngle,l.coneOuterGain=s.coneOuterGain,l.distanceModel=s.distanceModel,l.maxDistance=s.maxDistance,l.refDistance=s.refDistance,l.rolloffFactor=s.rolloffFactor,l.panningModel=s.panningModel):(a._pos||(a._pos=this._pos||[0,0,-.5]),e(a,"spatial"))}return this},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n(1))},,function(e,t,n){(function(t){var n="Expected a function",a=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,_=c||d||Function("return this")(),f=Object.prototype.toString,p=Math.max,h=Math.min,m=function(){return _.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return a;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):i.test(e)?a:+e}e.exports=function(e,t,a){var r,o,i,s,l,u,c=0,d=!1,_=!1,f=!0;if("function"!=typeof e)throw new TypeError(n);function g(t){var n=r,a=o;return r=o=void 0,c=t,s=e.apply(a,n)}function y(e){var n=e-u;return void 0===u||n>=t||n<0||_&&e-c>=i}function w(){var e=m();if(y(e))return x(e);l=setTimeout(w,function(e){var n=t-(e-u);return _?h(n,i-(e-c)):n}(e))}function x(e){return l=void 0,f&&r?g(e):(r=o=void 0,s)}function A(){var e=m(),n=y(e);if(r=arguments,o=this,u=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(w,t),d?g(e):s}(u);if(_)return l=setTimeout(w,t),g(u)}return void 0===l&&(l=setTimeout(w,t)),s}return t=b(t)||0,v(a)&&(d=!!a.leading,i=(_="maxWait"in a)?p(b(a.maxWait)||0,t):i,f="trailing"in a?!!a.trailing:f),A.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=u=o=l=void 0},A.flush=function(){return void 0===l?s:x(m())},A}}).call(this,n(1))},function(e){e.exports=[{name:"n/a",cat:"default",weight:"",pos_start:"a",pos_end:"a",frame_start:"0",frame_end:"6"},{name:"shoulder shimmy",cat:"pop",weight:"",pos_start:"a",pos_end:"a",frame_start:"6",frame_end:"54"},{name:"trucker honk",cat:"pop",weight:"",pos_start:"a",pos_end:"a",frame_start:"54",frame_end:"150"},{name:"head bob",cat:"both",weight:"",pos_start:"a",pos_end:"a",frame_start:"150",frame_end:"234"},{name:"hip rock",cat:"pop",weight:"",pos_start:"a",pos_end:"a",frame_start:"234",frame_end:"312"},{name:"lean (left)",cat:"pop",weight:"",pos_start:"a",pos_end:"a",frame_start:"312",frame_end:"366"},{name:"lean (right)",cat:"pop",weight:"",pos_start:"a",pos_end:"a",frame_start:"366",frame_end:"420"},{name:"open up",cat:"slow",weight:"",pos_start:"a",pos_end:"a",frame_start:"420",frame_end:"474"},{name:"holding heart",cat:"slow",weight:"",pos_start:"a",pos_end:"a",frame_start:"474",frame_end:"522"},{name:"reaching to audience",cat:"slow",weight:"",pos_start:"a",pos_end:"a",frame_start:"522",frame_end:"606"},{name:"two-step (left)",cat:"pop",weight:"",pos_start:"a",pos_end:"a",frame_start:"606",frame_end:"636"},{name:"jump",cat:"pop",weight:"",pos_start:"a",pos_end:"a",frame_start:"636",frame_end:"660"},{name:"drums",cat:"instrument",weight:"",pos_start:"a",pos_end:"a",frame_start:"666",frame_end:"702"},{name:"guitar",cat:"instrument",weight:"",pos_start:"a",pos_end:"a",frame_start:"720",frame_end:"744"},{name:"tambourine",cat:"instrument",weight:"",pos_start:"a",pos_end:"a",frame_start:"768",frame_end:"792"},{name:"bass",cat:"instrument",weight:"",pos_start:"a",pos_end:"a",frame_start:"876",frame_end:"900"},{name:"keyboard",cat:"instrument",weight:"",pos_start:"a",pos_end:"a",frame_start:"978",frame_end:"1026"},{name:"piano",cat:"instrument",weight:"",pos_start:"a",pos_end:"a",frame_start:"1038",frame_end:"1086"},{name:"shuffle",cat:"transition",weight:"",pos_start:"a",pos_end:"a",frame_start:"1098",frame_end:"1114"},{name:"shoulder shimmy",cat:"pop",weight:"",pos_start:"a",pos_end:"b",frame_start:"1132",frame_end:"1180"},{name:"trucker honk",cat:"pop",weight:"",pos_start:"a",pos_end:"b",frame_start:"1192",frame_end:"1288"},{name:"head bob",cat:"both",weight:"",pos_start:"a",pos_end:"b",frame_start:"1300",frame_end:"1384"},{name:"hip rock",cat:"pop",weight:"",pos_start:"a",pos_end:"b",frame_start:"1396",frame_end:"1474"},{name:"lean (left)",cat:"pop",weight:"",pos_start:"a",pos_end:"b",frame_start:"1486",frame_end:"1540"},{name:"lean (right)",cat:"pop",weight:"",pos_start:"a",pos_end:"b",frame_start:"1552",frame_end:"1606"},{name:"open up",cat:"slow",weight:"",pos_start:"a",pos_end:"b",frame_start:"1618",frame_end:"1672"},{name:"holding heart",cat:"slow",weight:"",pos_start:"a",pos_end:"b",frame_start:"1684",frame_end:"1732"},{name:"reaching to audience",cat:"slow",weight:"",pos_start:"a",pos_end:"b",frame_start:"1744",frame_end:"1828"},{name:"two-step (left)",cat:"pop",weight:"",pos_start:"a",pos_end:"b",frame_start:"1840",frame_end:"1870"},{name:"jump",cat:"pop",weight:"",pos_start:"a",pos_end:"b",frame_start:"1882",frame_end:"1902"},{name:"shoulder shimmy",cat:"pop",weight:"",pos_start:"b",pos_end:"a",frame_start:"1918",frame_end:"1966"},{name:"trucker honk",cat:"pop",weight:"",pos_start:"b",pos_end:"a",frame_start:"1978",frame_end:"2074"},{name:"head bob",cat:"both",weight:"",pos_start:"b",pos_end:"a",frame_start:"2086",frame_end:"2170"},{name:"hip rock",cat:"pop",weight:"",pos_start:"b",pos_end:"a",frame_start:"2182",frame_end:"2260"},{name:"lean (left)",cat:"pop",weight:"",pos_start:"b",pos_end:"a",frame_start:"2272",frame_end:"2326"},{name:"lean (right)",cat:"pop",weight:"",pos_start:"b",pos_end:"a",frame_start:"2338",frame_end:"2392"},{name:"open up",cat:"slow",weight:"",pos_start:"b",pos_end:"a",frame_start:"2404",frame_end:"2458"},{name:"holding heart",cat:"slow",weight:"",pos_start:"b",pos_end:"a",frame_start:"2470",frame_end:"2518"},{name:"reaching to audience",cat:"slow",weight:"",pos_start:"b",pos_end:"a",frame_start:"2530",frame_end:"2614"},{name:"two-step (left)",cat:"pop",weight:"",pos_start:"b",pos_end:"a",frame_start:"2626",frame_end:"2656"},{name:"jump",cat:"pop",weight:"",pos_start:"b",pos_end:"a",frame_start:"2668",frame_end:"2692"},{name:"shoulder shimmy",cat:"pop",weight:"",pos_start:"b",pos_end:"b",frame_start:"2704",frame_end:"2752"},{name:"trucker honk",cat:"pop",weight:"",pos_start:"b",pos_end:"b",frame_start:"2764",frame_end:"2860"},{name:"head bob",cat:"both",weight:"",pos_start:"b",pos_end:"b",frame_start:"2872",frame_end:"2956"},{name:"hip rock",cat:"pop",weight:"",pos_start:"b",pos_end:"b",frame_start:"2968",frame_end:"3046"},{name:"lean (left)",cat:"pop",weight:"",pos_start:"b",pos_end:"b",frame_start:"3058",frame_end:"3112"},{name:"lean (right)",cat:"pop",weight:"",pos_start:"b",pos_end:"b",frame_start:"3124",frame_end:"3178"},{name:"open up",cat:"slow",weight:"",pos_start:"b",pos_end:"b",frame_start:"3190",frame_end:"3244"},{name:"holding heart",cat:"slow",weight:"",pos_start:"b",pos_end:"b",frame_start:"3256",frame_end:"3304"},{name:"reaching to audience",cat:"slow",weight:"",pos_start:"b",pos_end:"b",frame_start:"3316",frame_end:"3400"},{name:"two-step (left)",cat:"pop",weight:"",pos_start:"b",pos_end:"b",frame_start:"3412",frame_end:"3442"},{name:"jump",cat:"pop",weight:"",pos_start:"b",pos_end:"b",frame_start:"3454",frame_end:"3478"}]},,,function(e){e.exports={}},,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),o={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return o.android()||o.blackberry()||o.ios()||o.opera()||o.windows()}},i=o;var s=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}}("localStorage");var l={get:function(e){return s?window.localStorage.getItem("pudding_boybands_".concat(e)):null},set:function(e){var t=e.key,n=e.value;s&&window.localStorage.setItem("pudding_boybands_".concat(t),n)},clear:function(e){s&&window.localStorage.removeItem("pudding_boybands_".concat(e))}};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=n(2).map(function(e){return c({},e,{sides:+e.sides,layer_extra:e.layer_extra.split(",").map(function(e){return e.trim()}).filter(function(e){return e})})});function f(e){var t=_.find(function(t){return t.value===e});return t||console.log("no item in crosswalk: ".concat(e)),t}function p(e){return e.split(",").map(function(e){return e.trim()}).filter(function(e){return e}).map(f)}function h(e){var t=u(e,2),n=t[0],a=t[1].map(function(e){return c({},e,{accessories:p(e.accessories),top_style:p(e.top_style),bottom_style:p(e.bottom_style),hair_style:p(e.hair_style),facial_hair:p(e.facial_hair)})}),r=d3.nest().key(function(e){return e.band}).entries(a),o=n.map(function(e){return c({},e,{boys:function(e){var t=r.find(function(t){return t.key===e});return t||console.log(e),t?t.values:[]}(e.band)})});return o.sort(function(e,t){return d3.ascending(e.highest_pos_date,t.highest_pos_date)}),o.filter(function(e){return e.boys.length}).map(function(e){return c({},e,{slug:function(e){return e.toLowerCase().replace(/[^\w]/g,"_")}(e.band)})})}function m(e){return c({},e,{rating:l.get(e.slug)})}var v=function(){return new Promise(function(e,t){d3.loadData("assets/data/bands.csv","assets/data/boys.csv",function(n,a){if(n)t(n);else{var r=h(a).map(m);e(r)}})})};function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){g(e,t,n[t])})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n(6).map(function(e){return b({},e,{frames:[+e.frame_start,+e.frame_end]})}),w=[],x=null,A=!1,k=[],T=!1,S=y.find(function(e){return"transition"===e.cat&&"shuffle"===e.name}).frames;function I(e){var t=e.frames,n=e.index;w[n].playSegments(t,!0)}function O(e,t){var n=k[t],a=n.frames[n.current];n.current+=1,n.current>=n.frames.length&&(n.current=0),I({frames:a,index:t})}function j(e){var t=e.cat,n=void 0===t?"default":t,a=e.instruments,r=void 0===a?[]:a,o=y.filter(function(e){return e.cat===n}),i=Math.random()<.5||"default"===n?"a":"b",s=d3.range(30).map(function(){var e=o.filter(function(e){return e.pos_start===i}),t=e[Math.floor(Math.random()*e.length)],n=t.frames,a=t.pos_end;return i=a,n});k=w.map(function(e,t){var n=r[t];return{current:0,frames:n?s.map(function(){return function(e){var t=y.find(function(t){return"instrument"===t.cat&&t.name===e});return t?t.frames:y[0].frames}(n)}):s.map(function(e){return e})}})}function M(){w.forEach(function(e){e.goToAndStop(0,!0)})}var E={load:function(){return new Promise(function(e,t){d3.loadData("assets/data/animation.json",function(n,a){n?t(n):(x=function(e){return b({},e,{layers:e.layers.map(function(e){var t=e.cl.split("--")[0];return b({},e,{cl:"".concat(t," ").concat(e.cl)})})})}(a[0]),e())})})},create:function(e){var t=e.nodes,n=e.cb;w=t.map(function(e,t){var a={animationData:x,container:e,autoplay:!1},r=lottie.loadAnimation(a);return r.addEventListener("complete",function(){return function(e){O(w[e],e)}(t)}),r.addEventListener("DOMLoaded",function(){A||n(),A=!0}),r})},play:function(){M(),k.length||j({}),w.forEach(O)},pause:M,transition:function(e){var t=e.shift,n=e.cat,a=void 0===n?"pop":n,r=e.instruments,o=void 0===r?[]:r;j({cat:a,instruments:o}),w.forEach(function(e,n){t?o[n]?O(0,n):I({frames:S,index:n}):T&&O(0,n)}),T=!!o.filter(function(e){return e}).length},transitionEnd:function(){w.forEach(O)}},P=n(3),H=500,$={},D=null,B=null,F=null,L=[];function G(){if($[D]&&$[D].playing()){var e=$[D].seek(),t=$[D].duration();B&&B({seek:e,duration:t})}}function V(e){var t=$[D];if(e){D&&D!==e&&t&&t.playing()&&function(){var e=$[D].volume();$[D].fade(e,0,H)}(),D=e;var n=$[e];n?(n.on("end",F),n.volume(0),n.play(),n.fade(0,1,4*H)):L.push(L.splice(L.indexOf(e),1)[0])}else t&&!t.playing()&&t.play()}var C={init:function(e){(L=e.map(function(e){return e.slug})).reverse(),function(){var e=function(){var e=L.pop(),n=new P.Howl({src:"".concat("assets/audio-20-fade","/").concat(e,".mp3"),onload:function(){$[e]=n,D===e&&V(e),t()},onloaderror:t,onfade:function(){e!==D&&$[e].stop()}})},t=function(t){L.length&&e()};e()}(),d3.interval(G,250)},play:V,pause:function(){D&&$[D]&&$[D].pause()},mute:function(e){P.Howler.mute(e)},setCallbacks:function(e){var t=e.cbEnd,n=e.cbProgress;B=n,F=t}},W=250,q=d3.select("#history").select(".history__player"),X=q.select(".progress__bar"),R=q.selectAll("button"),z=q.select(".queue__current"),N=null;function Y(e){["back","forward"].includes(e)&&(q.select('[data-state="play"]').classed("is-visible",!1),q.select('[data-state="pause"]').classed("is-visible",!0))}function Z(){var e=d3.select(this),t=e.classed("is-visible");e.classed("is-visible",!t)}function Q(){var e=d3.select(this),t=e.at("data-control"),n=e.selectAll("span"),a=null;n.size()&&(a=e.select("span.is-visible").at("data-state"),n.each(Z)),Y(t),function(e){["back","forward"].includes(e)&&(R.at("disabled",!0),setTimeout(function(){R.at("disabled",null)},W))}(t),N({control:t,state:a})}var U={init:function(e){N=e,R.on("click",Q)},progress:function(e){var t=function(e){return d3.format("%")(e)}(1-e.seek/e.duration);X.st("width",t)},queue:function(e){z.text(e+1)},play:function(){Y("forward")}};n(9);var J=function(){var e=document.createElement("fake"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(void 0!==e.style[n])return t[n];return null}(),K=d3.select("#history"),ee=K.select(".history__rating"),te=ee.selectAll("button"),ne=K.select(".history__reactions"),ae=16,re=0,oe=0,ie=null,se=[];function le(){d3.select(this).remove()}function ue(){var e=d3.select(this).at("data-value");re=ne.node().offsetWidth,oe=re<600?3:5;var t=Math.floor(15+10*Math.random());d3.range(t).forEach(function(){return function(e){var t="".concat(oe*ae+Math.random()*(re-oe*ae*2),"px"),n="".concat(oe+10*Math.random(),"rem"),a="".concat(Math.max(1,oe-3+3*Math.random()),"rem"),r=Math.ceil(3*Math.random());ne.append("div.reaction__item").text("love"===e?"":"").st({left:t,bottom:n,fontSize:a,width:a}).classed("is-float".concat(r),!0).on(J,le)}(e)}),ie(e)}var ce={init:function(e){ie=e,te.on("click",ue),function(){var e=function(e,t){var n=e.find(function(e){return e.rating===t});return n?+n.count:0},t=Date.now(),n="https://pudding.cool/2018/11/boybands-data/user-ratings.json?v=".concat(t);d3.loadData(n,function(t,n){t?console.log(t):(console.log(new Date(n[0].timestamp)),se=n[0].data.map(function(t){var n=t.key,a=e(t.values,"love"),r=e(t.values,"hate"),o=a+r;return{slug:n,love:a,hate:r,total:o,lovePercent:d3.format(".0%")(a/o),hatePercent:d3.format(".0%")(r/o)}}))})}()},update:function(e){var t=e.slug,n=e.rating;te.classed("is-selected",!1),n?(te.at("disabled",!0),ee.select(".rating__".concat(n)).classed("is-selected",!0)):te.at("disabled",null);var a=se.find(function(e){return e.slug===t}),r=a?a.lovePercent:"0%",o=a?a.hatePercent:"0%";ee.select(".rating__love span").text(r),ee.select(".rating__hate span").text(o)}},de=n(0),_e="abcdefghijklmnopqrstuvwxyz".split(""),fe=["jacket","vest","leather jacket","other jacket","suit jacket","windbreaker","letterman jacket","trenchcoat"],pe=["baseballcap-hightop-short","baseballcap-hightop-medium","baseballcap-shaggy","flathat-hightop-short","flathat-hightop-medium","dorag-hightop-medium","dorag-hightop-short","bandana-curly-short","bandana-curly-medium"],he=["baseballcap","beanie","beret","dorag","fedora","flathat","tophat","newsboycap","ushanka"],me=["hair-front","hair-back","accessories-front","accessories-back","top","bottom","facial-hair","instrument"];function ve(e){var t=de[e];return t||console.log("no color: ".concat(e)),t||de.black}function be(e){var t=null;return e.accessories.forEach(function(n){var a=e.hair_style.length?e.hair_style[0].layer_extra[0]:"",r=e.hair_length;n.layer_extra.forEach(function(e){var n="".concat(e,"-").concat(a,"-").concat(r);pe.includes(n)&&(t=n)})}),t}function ge(e){var t=!1;return e.accessories.forEach(function(e){e.layer_extra.forEach(function(e){he.includes(e)&&(t=!0)})}),t}function ye(e){var t=e.$svg,n=e.selector,a=e.col,r=e.base||a,o=t.select(n);if(o.size()){o.st("display","block");var i=o.selectAll("g");if(a&&i.selectAll("path").st({fill:a,stroke:a}),r){var s=function(e){return e===de.black?de["dark gray"]:d3.color(e).darker().toString()}(r),l=function(e){return e===de.white?de["light gray"]:e===de.black?de.gray:d3.color(e).brighter().toString()}(r);i.selectAll("g.dark path").st({fill:s,stroke:s}),i.selectAll("g.light path").st({fill:l,stroke:l})}i.selectAll("g.white path").st({fill:de.white,stroke:de.white}),i.selectAll("g.gray path").st({fill:de.gray,stroke:de.gray}),i.selectAll("g.red path").st({fill:de.red,stroke:de.red})}else console.log("no svg: ".concat(n))}function we(e){var t=e.$svg,n=e.d;t.select(".skin--bald").st("display","block"),n.hair_style.forEach(function(e){var a=n.hair_frosted&&"no"!==n.hair_frosted,r=ve(n.hair_color);t.select(".skin--bald").st("display","none"),t.select(".skin--general").st("display","none");var o=".skin--".concat(e?e.layer_base:"bald");ye({$svg:t,selector:o}),e&&e.layer_extra.forEach(function(o){var i=be(n),s=ge(n);if("rattail"===o)ye({$svg:t,selector:".hair-back--rattail",col:r,base:r});else{var l=".hair-front--".concat(o,"-").concat(n.hair_length),u=".hair-back--".concat(o,"-").concat(n.hair_length),c=a?function(e){var t=e.$svg,n=e.col,a=e.layer;t.select("defs").remove();var r=t.append("defs"),o=d3.range(5).map(function(){return _e[Math.floor(Math.random()*_e.length)]}).join(""),i=r.append("linearGradient").at({id:o,x1:"0%",x2:"0%",y1:a.includes("swept")?"0%":"100%",y2:a.includes("swept")?"100%":"0%"});return i.append("stop").at("offset","0%").at("stop-color",n),i.append("stop").at("offset","60%").at("stop-color",n),i.append("stop").at("offset","100%").at("stop-color",ve("blonde")),"url(#".concat(o,")")}({$svg:t,col:r,layer:o}):r;e.sides<3&&(i||!s)&&ye({$svg:t,selector:l,col:o.includes("curly")?r:c,base:r}),e.sides>1&&(i||!s||"ponytail"===o)&&ye({$svg:t,selector:u,col:c,base:r})}"ponytail"!==o||!i&&s||(ye({$svg:t,selector:".hair-front--crew-short",col:r,base:r}),ye({$svg:t,selector:".hair-back--crew-short",col:r,base:r}))})})}var xe={init:function(){},change:function(e){var t=e.$svg,n=e.d;!function(e){me.forEach(function(t){e.selectAll(".".concat(t)).st("display","none")})}(t),function(e){var t=e.$svg,n=ve(e.d.skin);t.selectAll(".skin g path").st({fill:n,stroke:n})}({$svg:t,d:n}),we({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d;n.accessories.forEach(function(e){e.layer_extra.forEach(function(a){var r=ge(n)&&be(n)||a,o=".accessories-front--".concat(r),i=".accessories-back--".concat(r);ye({$svg:t,selector:o}),2===e.sides&&ye({$svg:t,selector:i})})})}({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d;n.top_style.forEach(function(e){var a=fe.includes(e.value)?ve(n.jacket_color):ve(n.shirt_color),r=".top--".concat(e.layer_base);ye({$svg:t,selector:r,col:a}),t.select(".skin--sleeveless").st("display","none"),t.select(".skin--chest").st("display","none"),e.layer_extra.forEach(function(e){if(e.includes("skin")){var r=ve(n.skin);ye({$svg:t,selector:".".concat(e),skinCol:r})}else ye({$svg:t,selector:".".concat(e),col:a})})})}({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d;n.bottom_style.forEach(function(e){var a=ve(n.bottom_color),r=".bottom--right-base-".concat(e.layer_base),o=".bottom--left-base-".concat(e.layer_base);ye({$svg:t,selector:r,col:a}),ye({$svg:t,selector:o,col:a}),ye({$svg:t,selector:".bottom--waist",col:a}),e.layer_extra.forEach(function(e){ye({$svg:t,selector:".".concat(e),col:a})})})}({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d;n.facial_hair.forEach(function(e){var a=ve(n.hair_color);e.layer_extra.forEach(function(e){var n=".facial-hair--".concat(e);ye({$svg:t,selector:n,col:a})})})}({$svg:t,d:n}),function(e){var t=e.$svg,n=e.d;n.instrument&&ye({$svg:t,selector:".instrument--".concat(n.instrument)})}({$svg:t,d:n})}},Ae=100,ke=.53125,Te=4,Se=d3.select("#history").select("figure"),Ie=Se.select(".figure__info"),Oe=Se.select(".figure__boys"),je=null,Me=0,Ee=0,Pe=0,He=0,$e=!1;function De(){var e=Se.node().offsetWidth,t=Math.floor(e/(Me+1)),n=Math.floor(e/(Te+1));He=(Ee=t>=Ae?t:n)/2;var a=Ee/ke,r=Ie.node().offsetHeight;$e=Ee*Me>e-2*He,Oe.st("padding","0 ".concat(He,"px")),je&&(Se.st("height",a*($e?2:1)+r),je.st({width:Ee,height:a}),Oe.st({height:a}))}function Be(){E.transitionEnd()}function Fe(){d3.event.stopPropagation()}var Le={init:function(e){var t=e.bandData,n=e.cb;Me=d3.max(t,function(e){return e.boys.length});var a=d3.range(Me);Pe=t[0].boys.length;var r=(je=Oe.selectAll(".boy").data(a)).enter().append("div.boy");r.append("p").attr("class","boy__name"),je=r.merge(je),E.create({nodes:je.nodes(),cb:n}),E.play({}),xe.init(),De()},update:function(e){var t=e.boys,n=e.danceSpeed;De();var a=t.length,r=function(e){var t=d3.range(Me).map(function(e){return!1});if($e){var n=d3.range(e),a=n.slice(0,4),r=n.slice(4,Me);a.forEach(function(e){return t[e]=!0}),1===r.length?t[5]=!0:r.forEach(function(e){return t[e]=!0})}else{var o=Math.floor(Me/2),i=Math.floor(e/2),s=Math.floor(o)-i,l=s+e;d3.range(s,l).forEach(function(e){return t[e]=!0})}return t}(a),o=function(e){return $e?3===Pe&&3!==e:Math.abs(Pe-e)%2==1}(a);!function(e){je.classed("is-visible",function(t,n){return e[n]});var t=e.filter(function(e){return e}).length,n=$e&&3===t||!$e&&t%2==0?Ee/2:0;Oe.st("left",n),Oe.on(J,Be),je.on(J,Fe)}(r),function(e){var t=e.boys,n=e.subset.map(function(e,t){return e?t:null}),a=n.filter(function(e){return null!==e});t.forEach(function(e,t){var r=je.filter(function(e,r){return r===n.findIndex(function(e){return e===a[t]})});xe.change({$svg:r.select("svg"),d:e}),r.select(".boy__name").text(e.name)})}({boys:t,subset:r});var i=n,s=t.map(function(e){return e.instrument});s.reverse();var l=r.map(function(e){return e?s.pop():null});E.transition({shift:o,cat:i,instruments:l,subset:r}),Pe=a},resize:De},Ge=window.location.hostname.indexOf("localhost")>-1,Ve={};var Ce={send:function(e){var t=e.category,n=e.action,a=e.once;(function(e){var t=e.category,n=e.action;if(e.once){var a=t.toString().replace(/\W+/g,""),r=n.toString().replace(/\W+/g,""),o="".concat(a).concat(r);return!Ve[o]&&(Ve[o]=!0,!0)}return!0})({category:t,action:n,once:a})&&(Ge?console.log({category:t,action:n,once:a}):window.ga&&ga("send",{hitType:"event",eventCategory:t.toString(),eventAction:n.toString()}))}},We=d3.select("#history"),qe=We.select(".figure__info"),Xe=qe.select(".info__year span"),Re=qe.select(".info__song span"),ze=qe.select(".info__band span"),Ne=qe.select(".info__band .band__youtube"),Ye=We.select(".rating__tip"),Ze=We.select(".history__drawer"),Qe=Ze.select(".drawer__menu"),Ue=Ze.select(".drawer__tab"),Je=[],Ke=-1;function et(e,t){(Ke=t?e:Ke+e)>=Je.length?Ke=0:Ke<0&&(Ke=Je.length-1);var n=Je[Ke];!function(e){var t=d3.timeParse("%Y-%m-%d"),n=d3.timeFormat("%Y");Xe.text(n(t(e.highest_pos_date))),Re.text(e.highest_song),ze.text(e.band),Ne.attr("href",e.highest_song_vid)}(n),Le.update(n),U.queue(Ke),U.progress({seek:0,duration:1}),C.play(n.slug);var a=n.slug,r=n.rating;ce.update({slug:a,rating:r})}function tt(){Ue.classed("is-hidden",!1),Qe.classed("is-visible",!1)}function nt(e){d3.event.stopPropagation(),Ue.classed("is-hidden",!1),Qe.classed("is-visible",!1),et(e.index,!0),U.play()}function at(){d3.event.stopPropagation();var e=Ze.classed("is-visible");Qe.classed("is-visible",!e),Ue.classed("is-hidden",!e)}function rt(){Ce.send({category:"youtube",action:"click",once:!0})}function ot(e){var t=e.seek,n=e.duration;U.progress({seek:t,duration:n})}function it(){et(1)}function st(e){var t=Je[Ke];t.rating=e;var n=t.slug,a=t.rating;l.set({key:n,value:a}),Ce.send({category:n,action:e,once:!0}),ce.update({slug:n,rating:a}),Ye.classed("is-hidden",!0)}function lt(e){var t=e.control,n=e.state;switch(t){case"toggle":"play"===n?(C.play(),E.play({})):(E.pause(),C.pause());break;case"back":et(-1);break;case"forward":et(1);break;case"volume":C.mute("on"===n)}}function ut(){var e=d3.event.keyCode;37===e?lt({control:"back"}):39===e&&lt({control:"forward"})}var ct={init:function(e){var t=e.data,n=e.cb;Je=t,U.init(lt),ce.init(st),Le.init({bandData:Je,cb:n}),C.setCallbacks({cbEnd:it,cbProgress:ot}),Ne.on("click",rt),d3.select("main").on("click",tt),function(){Ue.on("click",at);var e=Je.map(function(e,t){return{index:t,slug:e.slug,band:e.band}});e.sort(function(e,t){return d3.ascending(e.band.toLowerCase(),t.band.toLowerCase())}),Qe.select(".drawer__bands").selectAll("li").data(e).enter().append("li").text(function(e){return e.band}).on("click",nt)}()},start:function(){et(1),d3.select("body").on("keyup",ut)},resize:function(){Le.resize()}},dt=d3.select("body"),_t=dt.select(".intro"),ft=dt.selectAll(".intro__choice button"),pt=dt.select(".choice__loading"),ht=0;function mt(){var e=dt.node().offsetWidth;ht!==e&&(ht=e,ct.resize())}function vt(){var e=d3.select(this).at("data-value");dt.select("#".concat(e)).classed("is-selected",!0),"history"===e&&ct.start(),_t.classed("is-hidden",!0)}function bt(){ft.classed("is-visible",!0).on("click",vt),pt.classed("is-hidden",!0)}dt.classed("is-mobile",i.any()),window.addEventListener("resize",r()(mt,150)),function(){if(dt.select("header").classed("is-sticky")){var e=dt.select(".header__menu"),t=dt.select(".header__toggle");t.on("click",function(){var n=e.classed("is-visible");e.classed("is-visible",!n),t.classed("is-visible",!n)})}}(),E.load().then(v).then(function(e){C.init(e),ct.init({data:e,cb:bt})})}]);